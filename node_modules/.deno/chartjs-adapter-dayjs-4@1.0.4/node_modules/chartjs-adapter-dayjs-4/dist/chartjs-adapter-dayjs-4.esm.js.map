{"version":3,"file":"chartjs-adapter-dayjs-4.esm.js","sources":["../src/index.ts"],"sourcesContent":["import { _adapters } from 'chart.js';\n\nimport dayjs, { QUnitType } from 'dayjs';\n\nimport type { TimeUnit } from 'chart.js';\n\n// Needed to handle the custom parsing\nimport CustomParseFormat from 'dayjs/plugin/customParseFormat.js';\n\n// Needed to handle quarter format\nimport AdvancedFormat from 'dayjs/plugin/advancedFormat.js';\n\n// Needed to handle adding/subtracting quarter\nimport QuarterOfYear from 'dayjs/plugin/quarterOfYear.js';\n\n// Needed to handle localization format\nimport LocalizedFormat from 'dayjs/plugin/localizedFormat.js';\n\nimport isoWeek from 'dayjs/plugin/isoWeek.js';\n\ndayjs.extend(AdvancedFormat);\n\ndayjs.extend(QuarterOfYear);\n\ndayjs.extend(LocalizedFormat);\n\ndayjs.extend(CustomParseFormat);\n\ndayjs.extend(isoWeek);\n\nconst FORMATS = {\n  datetime: 'MMM D, YYYY, h:mm:ss a',\n  millisecond: 'h:mm:ss.SSS a',\n  second: 'h:mm:ss a',\n  minute: 'h:mm a',\n  hour: 'hA',\n  day: 'MMM D',\n  week: 'll',\n  month: 'MMM YYYY',\n  quarter: '[Q]Q - YYYY',\n  year: 'YYYY',\n};\n\n_adapters._date.override({\n  //_id: 'dayjs', //DEBUG,\n  formats: () => FORMATS,\n  parse: function (value: any, format?: TimeUnit) {\n    const valueType = typeof value;\n\n    if (value === null || valueType === 'undefined') {\n      return null;\n    }\n\n    if (valueType === 'string' && typeof format === 'string') {\n      return dayjs(value, format).isValid() ? dayjs(value, format).valueOf() : null;\n    } else if (!(value instanceof dayjs)) {\n      return dayjs(value).isValid() ? dayjs(value).valueOf() : null;\n    }\n    return null;\n  },\n  format: function (time: any, format: TimeUnit): string {\n    return dayjs(time).format(format);\n  },\n  add: function (time: any, amount: number, unit: QUnitType & TimeUnit) {\n    return dayjs(time).add(amount, unit).valueOf();\n  },\n  diff: function (max: any, min: any, unit: TimeUnit) {\n    return dayjs(max).diff(dayjs(min), unit);\n  },\n  startOf: function (time: any, unit: (TimeUnit & QUnitType) | 'isoWeek', weekday?: number) {\n    if (unit === 'isoWeek') {\n      // Ensure that weekday has a valid format\n      //const formattedWeekday\n\n      const validatedWeekday: number =\n        typeof weekday === 'number' && weekday > 0 && weekday < 7 ? weekday : 1;\n\n      return dayjs(time).isoWeekday(validatedWeekday).startOf('day').valueOf();\n    }\n\n    return dayjs(time).startOf(unit).valueOf();\n  },\n  endOf: function (time: any, unit: TimeUnit & QUnitType) {\n    return dayjs(time).endOf(unit).valueOf();\n  },\n});\n"],"names":["dayjs","extend","AdvancedFormat","QuarterOfYear","LocalizedFormat","CustomParseFormat","isoWeek","FORMATS","datetime","millisecond","second","minute","hour","day","week","month","quarter","year","_adapters","_date","override","formats","parse","value","format","valueType","isValid","valueOf","time","add","amount","unit","diff","max","min","startOf","weekday","validatedWeekday","isoWeekday","endOf"],"mappings":";;;;;;;;AAoBAA,KAAK,CAACC,MAAM,CAACC,cAAc,CAAC;AAE5BF,KAAK,CAACC,MAAM,CAACE,aAAa,CAAC;AAE3BH,KAAK,CAACC,MAAM,CAACG,eAAe,CAAC;AAE7BJ,KAAK,CAACC,MAAM,CAACI,iBAAiB,CAAC;AAE/BL,KAAK,CAACC,MAAM,CAACK,OAAO,CAAC;AAErB,IAAMC,OAAO,GAAG;EACdC,QAAQ,EAAE,wBAAwB;EAClCC,WAAW,EAAE,eAAe;EAC5BC,MAAM,EAAE,WAAW;EACnBC,MAAM,EAAE,QAAQ;EAChBC,IAAI,EAAE,IAAI;EACVC,GAAG,EAAE,OAAO;EACZC,IAAI,EAAE,IAAI;EACVC,KAAK,EAAE,UAAU;EACjBC,OAAO,EAAE,aAAa;EACtBC,IAAI,EAAE;CACP;AAEDC,SAAS,CAACC,KAAK,CAACC,QAAQ,CAAC;;EAEvBC,OAAO,EAAE;IAAA,OAAMd,OAAO;;EACtBe,KAAK,EAAE,eAAUC,KAAU,EAAEC,MAAiB;IAC5C,IAAMC,SAAS,GAAG,OAAOF,KAAK;IAE9B,IAAIA,KAAK,KAAK,IAAI,IAAIE,SAAS,KAAK,WAAW,EAAE;MAC/C,OAAO,IAAI;;IAGb,IAAIA,SAAS,KAAK,QAAQ,IAAI,OAAOD,MAAM,KAAK,QAAQ,EAAE;MACxD,OAAOxB,KAAK,CAACuB,KAAK,EAAEC,MAAM,CAAC,CAACE,OAAO,EAAE,GAAG1B,KAAK,CAACuB,KAAK,EAAEC,MAAM,CAAC,CAACG,OAAO,EAAE,GAAG,IAAI;KAC9E,MAAM,IAAI,EAAEJ,KAAK,YAAYvB,KAAK,CAAC,EAAE;MACpC,OAAOA,KAAK,CAACuB,KAAK,CAAC,CAACG,OAAO,EAAE,GAAG1B,KAAK,CAACuB,KAAK,CAAC,CAACI,OAAO,EAAE,GAAG,IAAI;;IAE/D,OAAO,IAAI;GACZ;EACDH,MAAM,EAAE,gBAAUI,IAAS,EAAEJ,OAAgB;IAC3C,OAAOxB,KAAK,CAAC4B,IAAI,CAAC,CAACJ,MAAM,CAACA,OAAM,CAAC;GAClC;EACDK,GAAG,EAAE,aAAUD,IAAS,EAAEE,MAAc,EAAEC,IAA0B;IAClE,OAAO/B,KAAK,CAAC4B,IAAI,CAAC,CAACC,GAAG,CAACC,MAAM,EAAEC,IAAI,CAAC,CAACJ,OAAO,EAAE;GAC/C;EACDK,IAAI,EAAE,cAAUC,GAAQ,EAAEC,GAAQ,EAAEH,IAAc;IAChD,OAAO/B,KAAK,CAACiC,GAAG,CAAC,CAACD,IAAI,CAAChC,KAAK,CAACkC,GAAG,CAAC,EAAEH,IAAI,CAAC;GACzC;EACDI,OAAO,EAAE,iBAAUP,IAAS,EAAEG,IAAwC,EAAEK,OAAgB;IACtF,IAAIL,IAAI,KAAK,SAAS,EAAE;;;MAItB,IAAMM,gBAAgB,GACpB,OAAOD,OAAO,KAAK,QAAQ,IAAIA,OAAO,GAAG,CAAC,IAAIA,OAAO,GAAG,CAAC,GAAGA,OAAO,GAAG,CAAC;MAEzE,OAAOpC,KAAK,CAAC4B,IAAI,CAAC,CAACU,UAAU,CAACD,gBAAgB,CAAC,CAACF,OAAO,CAAC,KAAK,CAAC,CAACR,OAAO,EAAE;;IAG1E,OAAO3B,KAAK,CAAC4B,IAAI,CAAC,CAACO,OAAO,CAACJ,IAAI,CAAC,CAACJ,OAAO,EAAE;GAC3C;EACDY,KAAK,EAAE,eAAUX,IAAS,EAAEG,IAA0B;IACpD,OAAO/B,KAAK,CAAC4B,IAAI,CAAC,CAACW,KAAK,CAACR,IAAI,CAAC,CAACJ,OAAO,EAAE;;CAE3C,CAAC"}