"use client";
import {
  Box,
  Paper,
  Portal,
  UnstyledButton,
  clsx_default,
  parseThemeColor,
  px,
  rgba,
  useDirection
} from "./chunk-WYVTJ35Y.js";
import "./chunk-3PSBCGNU.js";
import "./chunk-H5YQAEFC.js";
import {
  require_jsx_runtime
} from "./chunk-CBL72VMY.js";
import {
  useHotkeys,
  useMediaQuery,
  useResizeObserver,
  useTimeout,
  useWindowEvent
} from "./chunk-22UVDF7D.js";
import {
  require_react
} from "./chunk-B3GNVBX2.js";
import {
  __toESM
} from "./chunk-DC5AMYBS.js";

// node_modules/.deno/mantine-contextmenu@7.15.3/node_modules/mantine-contextmenu/dist/index.mjs
var import_jsx_runtime = __toESM(require_jsx_runtime(), 1);
var import_react = __toESM(require_react(), 1);
var import_react2 = __toESM(require_react(), 1);
var import_react3 = __toESM(require_react(), 1);
var import_jsx_runtime2 = __toESM(require_jsx_runtime(), 1);
var import_jsx_runtime3 = __toESM(require_jsx_runtime(), 1);
var import_jsx_runtime4 = __toESM(require_jsx_runtime(), 1);
var import_jsx_runtime5 = __toESM(require_jsx_runtime(), 1);
var import_jsx_runtime6 = __toESM(require_jsx_runtime(), 1);
function T({ className: e, style: t }) {
  return (0, import_jsx_runtime.jsx)(Box, { className: clsx_default("mantine-contextmenu-divider", e), style: t });
}
function W({ zIndex: e, children: t, onHide: o }) {
  let m = (a) => {
    a.preventDefault(), o();
  };
  return (0, import_jsx_runtime2.jsx)("div", { className: "mantine-contextmenu-overlay", style: { zIndex: e }, onClick: m, onContextMenu: m, children: t });
}
function F({ onHide: e, zIndex: t, ...o }) {
  return useWindowEvent("resize", e), useWindowEvent("scroll", e), useHotkeys([["Escape", e]]), (0, import_jsx_runtime3.jsx)(Portal, { children: (0, import_jsx_runtime3.jsx)(W, { zIndex: t, onHide: e, children: (0, import_jsx_runtime3.jsx)(I, { ...o, onHide: e }) }) });
}
var R = { shadow: "sm", borderRadius: "xs", submenuDelay: 500 };
var S = (0, import_react3.createContext)(R);
var U = (0, import_react3.createContext)({ showContextMenu: () => () => {
}, hideContextMenu: () => {
}, isContextMenuVisible: false });
function Ie({ zIndex: e = 9999, shadow: t = R.shadow, borderRadius: o = R.borderRadius, submenuDelay: m = R.submenuDelay, children: a }) {
  let [p, C] = (0, import_react3.useState)(null), x = () => {
    C(null);
  }, l = (M, i) => (n) => {
    n.preventDefault(), n.stopPropagation();
    let { x: d, y: f } = "touches" in n ? { x: n.touches.item(0).clientX, y: n.touches.item(0).clientY } : { x: n.clientX, y: n.clientY };
    C({ x: d, y: f, content: M, zIndex: (i == null ? void 0 : i.zIndex) || e, className: i == null ? void 0 : i.className, style: i == null ? void 0 : i.style, classNames: i == null ? void 0 : i.classNames, styles: i == null ? void 0 : i.styles });
  };
  return (0, import_jsx_runtime4.jsx)(S.Provider, { value: { shadow: t, borderRadius: o, submenuDelay: m }, children: (0, import_jsx_runtime4.jsxs)(U.Provider, { value: { showContextMenu: l, hideContextMenu: x, isContextMenuVisible: !!p }, children: [a, p && (0, import_jsx_runtime4.jsx)(F, { onHide: x, ...p })] }) });
}
function Re() {
  return (0, import_react3.useContext)(U);
}
function $(e) {
  let t = e.replace(/([a-z\d])([A-Z]+)/g, "$1 $2").replace(/\W|_/g, " ").trim().toLowerCase();
  return `${t.charAt(0).toUpperCase()}${t.slice(1)}`;
}
function I({ x: e, y: t, content: o, zIndex: m, onHide: a, className: p, style: C, classNames: x, styles: l }) {
  var _a;
  let { shadow: M, borderRadius: i } = (0, import_react2.useContext)(S), [n] = useResizeObserver(), { width: d, height: f } = ((_a = n.current) == null ? void 0 : _a.getBoundingClientRect()) || { width: 0, height: 0 }, y = 0, b = 0;
  typeof window < "u" && ({ innerWidth: y, innerHeight: b } = window);
  let { dir: D } = useDirection();
  return (0, import_jsx_runtime5.jsx)(Paper, { ref: n, shadow: M, radius: i, className: clsx_default("mantine-contextmenu", p, x == null ? void 0 : x.root), style: [({ spacing: { md: h } }) => {
    let r = px(h);
    return { zIndex: m, top: t + f + r > b ? b - f - r : t, left: D === "ltr" ? e + d + r > y ? y - d - r : e : y - r - (e - d - r < 0 ? d + r : e) };
  }, C, l == null ? void 0 : l.root], children: Array.isArray(o) ? o.map(({ key: h, hidden: r, className: P, style: H, onClick: g, items: w, title: z, ...u }) => r ? null : g || w ? (0, import_jsx_runtime5.jsx)(V, { className: clsx_default(x == null ? void 0 : x.item, P), style: [l == null ? void 0 : l.item, H], title: z ?? $(h), onClick: g, onHide: a, items: w, ...u }, h) : (0, import_jsx_runtime5.jsx)(T, { className: clsx_default(x == null ? void 0 : x.divider, P), style: [l == null ? void 0 : l.divider, H] }, h)) : o(a) });
}
function V({ className: e, style: t, icon: o, iconRight: m, title: a, color: p, disabled: C, onClick: x, onHide: l, items: M }) {
  let i = (0, import_react.useRef)(null), { submenuDelay: n } = (0, import_react.useContext)(S), d = useMediaQuery("(hover: hover)"), [f, y] = (0, import_react.useState)(null), { start: b, clear: D } = useTimeout(() => {
    let { top: u, right: v } = i.current.getBoundingClientRect();
    y({ x: v, y: u });
  }, n), { start: h, clear: r } = useTimeout(() => {
    y(null);
  }, n), P = () => {
    r(), b();
  }, H = () => {
    D(), h();
  }, g = M && !C, w = g && d, z = g ? (u) => {
    u.stopPropagation(), P();
  } : x ? (u) => {
    l(), x(u);
  } : void 0;
  return (0, import_jsx_runtime6.jsxs)("div", { onMouseEnter: w ? P : void 0, onMouseLeave: w ? H : void 0, children: [(0, import_jsx_runtime6.jsxs)(UnstyledButton, { ref: i, style: [(u) => {
    let { colors: v } = u, s = p ? parseThemeColor({ color: p, theme: u }).value : void 0;
    return { "--mantine-contextmenu-item-button-color": s || "var(--mantine-color-text)", "--mantine-contextmenu-item-button-hover-bg-color-light": s ? rgba(s, 0.08) : rgba(v.gray[4], 0.25), "--mantine-contextmenu-item-button-hover-bg-color-dark": s ? rgba(s, 0.15) : rgba(v.dark[3], 0.25), "--mantine-contextmenu-item-button-pressed-bg-color-light": s ? rgba(s, 0.2) : rgba(v.gray[4], 0.5), "--mantine-contextmenu-item-button-pressed-bg-color-dark": s ? rgba(s, 0.3) : rgba(v.dark[3], 0.5) };
  }, t], className: clsx_default("mantine-contextmenu-item-button", e), disabled: C, onClick: z, children: [o && (0, import_jsx_runtime6.jsx)(Box, { fz: 0, mr: "xs", mt: -2, children: o }), (0, import_jsx_runtime6.jsx)("div", { className: "mantine-contextmenu-item-button-title", children: a }), m ? (0, import_jsx_runtime6.jsx)(Box, { fz: 0, ml: "xs", mt: -2, children: m }) : M && (0, import_jsx_runtime6.jsx)(Box, { fz: 10, mt: -2, ml: "xs", children: "â–¶" })] }), f && (0, import_jsx_runtime6.jsx)(I, { content: M, onHide: l, ...f })] });
}
export {
  U as ContextMenuCtx,
  T as ContextMenuDivider,
  V as ContextMenuItem,
  F as ContextMenuPortal,
  Ie as ContextMenuProvider,
  S as ContextMenuSettingsCtx,
  $ as humanize,
  Re as useContextMenu
};
//# sourceMappingURL=mantine-contextmenu.js.map
